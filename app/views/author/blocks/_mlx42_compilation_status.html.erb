<% status = block.data.to_h["compilation_status"] %>
<% case status %>
<% when "queued", "compiling" %>
  <div class="flex items-center text-yellow-600 bg-yellow-50 p-2 rounded">
    <%= icon_spinner size: "sm", class: "text-yellow-600" %>
    <%= status.capitalize %>...
  </div>
<% when "success" %>
  <div class="flex items-center text-green-600 bg-green-50 p-2 rounded">
    <%= icon_checkmark_circle size: "sm", class: "mr-2" %>
    Compiled successfully
  </div>
<% when "imported" %>
  <div class="flex items-center text-green-600 bg-green-50 p-2 rounded">
    <%= icon_checkmark_circle size: "sm", class: "mr-2" %>
    Imported successfully
  </div>
<% when "failed", "error" %>
  <div class="text-red-600 bg-red-50 p-2 rounded">
    <div class="flex items-center">
      <%= icon_x_circle size: "sm", class: "mr-2" %>
      <span>Compilation failed</span>
    </div>
    <% if block.compilation_error.present? %>
      <details class="mt-2">
        <summary class="cursor-pointer text-xs hover:underline">Show error details</summary>
        <pre class="mt-2 text-xs bg-gray-900 text-red-400 p-2 rounded overflow-auto max-h-40 font-mono"><%= block.compilation_error %></pre>
      </details>
    <% end %>
  </div>
<% else %>
  <div class="text-gray-500 bg-gray-50 p-2 rounded text-center">
    Not compiled yet
  </div>
<% end %>
