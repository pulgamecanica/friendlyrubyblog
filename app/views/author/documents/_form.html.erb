<% form_data = @document.persisted? ? { turbo_frame: "document_metadata" } : {} %>
<%= form_with model: [:author, document],
              data: { turbo_frame: "document_metadata" },
              class: "space-y-3" do |f| %>

  <%= f.hidden_field :kind, value: (document.kind.presence || "post") %>

  <div>
    <%= f.label :title, class: "block text-sm font-medium" %>
    <%= f.text_field :title, class: "w-full rounded border px-3 py-2" %>
  </div>

  <div>
    <%= f.label :description, class: "block text-sm font-medium" %>
    <%= f.text_area :description, rows: 3, class: "w-full rounded border px-3 py-2" %>
  </div>

  <div class="flex items-center gap-3">
    <%= f.check_box :published %>
    <%= f.label :published, "Published" %>
  </div>

  <%= f.submit(document.persisted? ? "Save Metadata" : "Create Document",
              class: "rounded bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700") %>
<% end %>
