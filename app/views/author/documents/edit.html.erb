<% content_for :title, "Editing Â· #{@document.title}" %>

<div class="min-h-screen bg-gray-50">
  <!-- Sticky Header -->
  <%= render "header", document: @document %>

  <!-- Main Content -->
  <div class="flex flex-col">
    <!-- Document Metadata Section (Collapsible) -->
    <%= render "metadata_section", document: @document %>

    <!-- Document Blocks Section -->
    <div class="flex-1 px-6 py-6">
      <div class="mx-auto max-w-6xl">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl font-semibold text-gray-900">Content Blocks</h2>
          <span class="text-sm text-gray-500"><%= @blocks.count %> blocks</span>
        </div>

        <div id="blocks" class="space-y-4">
          <%= turbo_frame_tag "blocks" do %>
            <%= render partial: "author/blocks/block", collection: @blocks, as: :block %>
          <% end %>
        </div>

        <!-- New Block Form -->
        <div class="mt-8 p-6 bg-white rounded-lg border-2 border-dashed border-gray-300">
          <turbo-frame id="new_block">
            <%= render "author/blocks/form", document: @document, block: Block.new(type: "MarkdownBlock") %>
          </turbo-frame>
        </div>
      </div>
    </div>
  </div>
</div>
